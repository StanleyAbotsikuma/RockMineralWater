<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="styles.css" />
  
  <link rel="stylesheet" href="staff.css" />
  <link rel="stylesheet" href="assets/css/material-dashboard.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Rock Mineral Water</title>
  <script type="module" src="/main.js" defer></script>
  <script src="func.js" ></script>
  <script type="module" src="access.js" defer></script>
  <link id="pagestyle" href="assets/css/material-dashboard.min.css" rel="stylesheet" />

  <link href="assets/fontawesome-free-6.4.0-web/css/all.css" rel="stylesheet">
  <script src="assets/js/material-dashboard.min.js"></script>


  <script async defer src="assets/js/buttons.js"></script>


  <script type="module" src="access.js" defer></script>



  <script type="module"  defer>
     ru();
    const { invoke } = window.__TAURI__.tauri;
  
    document
  .getElementById('sign_out').addEventListener("click",function ()  {
    
    window.eval("window.location.replace('index.html')");
    invoke('login_resize');
  });
  </script>
  <style>
    .icon{z-index: 1020;}

  </style>
</head>

<body>

    <div data-tauri-drag-region class="titlebar" style="z-index: 1000!important;">
      <div class="titlebar-button" id="titlebar-minimize">
        <img
          src="https://api.iconify.design/mdi:window-minimize.svg"
          alt="minimize"
        />
      </div>
      
      <div class="titlebar-button" id="titlebar-close">
        <img src="https://api.iconify.design/mdi:close.svg" alt="close" />
      </div>
    </div>
    
  
  <div class="staffDash">
    <div class="row container-fluid">
      <div class="col-lg-2 col-md-6 col-sm-6 mt-lg-0 mt-4">
        <div class="card ">
          <div class="card-header p-3 pt-2 bg-transparent">
            <div
              class="icon icon-lg icon-shape bg-gradient-info text-center border-radius-xl mt-n4 position-absolute"
              style="background-color: #EAAF31!important;background-image: unset;">
              <i class="fas fa-truck-fast" style="font-size: 15px;"></i>
            </div>
            <div class="text-end pt-1">
              <p class="text-sm mb-0 text-capitalize ">Bags Sold</p>
              <br>
              <hr class="horizontal my-0 dark">
              <h4 class="mb-0 " id="bags_sold"></h4>
            </div>
          </div>

        </div>
      </div>
      <div class="col-lg-2 col-md-6 col-sm-6 mt-lg-0 mt-4">
        <div class="card ">
          <div class="card-header p-3 pt-2 bg-transparent">
            <div
              class="icon icon-lg icon-shape bg-gradient-info text-center border-radius-xl mt-n4 position-absolute"
              style="background-color: #EAAF31!important;background-image: unset;">
              <i class="fas fa-money-bill-wave" style="font-size: 15px;"></i>
            </div>
            <div class="text-end pt-1">
              <p class="text-sm mb-0 text-capitalize ">Amount</p>
              <br>
              <hr class="horizontal my-0 dark">
              <h4 class="mb-0 " id="amount_sold"></h4>
            </div>
          </div>

        </div>
      </div>
      <div class="col-lg-2 col-md-6 col-sm-6 mt-lg-0 mt-4">
        <div class="card ">
          <div class="card-header p-3 pt-2 bg-transparent">
            <div
              class="icon icon-lg icon-shape bg-gradient-info text-center border-radius-xl mt-n4 position-absolute"
              style="background-color: #EAAF31!important;background-image: unset;">
              <i class="fas fa-rotate-left" style="font-size: 15px;"></i>
            </div>
            <div class="text-end pt-1">
              <p class="text-sm mb-0 text-capitalize ">Returned</p>
              <br>
              <hr class="horizontal my-0 dark">
              <h4 class="mb-0 " id="bags_return"></h4>
            </div>
          </div>

        </div>
      </div>
      <div class="col-lg-2 col-md-6 col-sm-6 mt-lg-0 mt-4">
        
        <div class="card ">
          <div class="card-header p-3 pt-2 bg-transparent">
            <div
              class="icon icon-lg icon-shape bg-gradient-info text-center border-radius-xl mt-n4 position-absolute"
              style="background-color: #EAAF31!important;background-image: unset;">
              <i class="fas fa-store" style="font-size: 15px;"></i>
            </div>
            <div class="text-end pt-1">
              <p class="text-sm mb-0 text-capitalize ">Bags Left</p>
              <br>
              <hr class="horizontal my-0 dark">
              <h4 class="mb-0 " id="bags_left"></h4>
            </div>
          </div>

        </div>
      </div>
      <div class="col-lg-2 col-md-6 col-sm-6 mt-lg-0 mt-4">
       
        <div class="card ">
          <div class="card-header p-3 pt-2 bg-transparent">
            <div
              class="icon icon-lg icon-shape bg-gradient-info text-center border-radius-xl mt-n4 position-absolute"
              style="background-color: #EAAF31!important;background-image: unset;">
              <i class="fas fa-cubes" style="font-size: 15px;"></i>
            </div>
            <div class="text-end pt-1">
              <p class="text-sm mb-0 text-capitalize ">Produced</p>
              <br>
              <hr class="horizontal my-0 dark">
              <h4 class="mb-0 " id="bags_produced"></h4>
            </div>
          </div>

        </div>
      </div>


    </div>
    
    <div>
      
      <!-- <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#salesCreate">Sell</button> -->
        <button id="" class="bg-gradient-success" style="margin-right: 20px;color: azure;" type="button" class="btn"  data-bs-toggle="modal" data-bs-target="#salesCreate" >Sell</button>
        <div class="modal fade " id="salesCreate" tabindex="-1" role="dialog" aria-labelledby="modalsalesTitle"
        aria-hidden="true" style="border-radius: 0!important;">
        <div class="modal-dialog modal-dialog-centered modal-md" role="document">
          <div class="modal-content" style="border-radius: 0!important;">
            <div class="modal-body p-0">
              <div class="card card-plain">
                <div class="card-header pb-0 text-left">
                  <h3 class="">Sales</h3>
                  <p class="mb-0"></p>
                </div>
                <div class="card-body pb-3">
                  <form>
                    <div class='form-group'>
                      <label for='in_SalesType'>Type</label>
                      <input name='in_SalesType' id='in_SalesType' class='form-control' type='text' >
                  </div>
                  <div class='form-group'>
                      <label for='in_Quantity'>Quantity</label>
                      <input name='in_Quantity' id='in_Quantity' class='form-control' type='text' >
                  </div>
                  <div class='form-group'>
                      <label for='in_CustomerName'>Customer Name</label>
                      <input name='in_CustomerName' id='in_CustomerName' class='form-control' type='text' >
                  </div>
                  <div class='form-group'>
                      <label for='in_CustomerPhone'>Customer Phone</label>
                      <input name='in_CustomerPhone' id='in_CustomerPhone' class='form-control' type='text' >
                  </div>
                  <div class='form-group'>
                      <label for='in_CustomerAddress'>Customer Address</label>
                      <input name='in_CustomerAddress' id='in_CustomerAddress' class='form-control' type='text' >
                  </div>
                  <div class='form-group'>
                      <label for='in_AmountPaid'>Amount Paid</label>
                      <input name='in_AmountPaid' id='in_AmountPaid' class='form-control' type='text' >
                  </div>
                  <div class='form-group'>
                      <label for='in_DispatchId'>Dispatch ID</label>
                      <input name='in_DispatchId' id='in_DispatchId' class='form-control' type='text' >
                  </div>
                  <!-- <div class='form-group'>
                      <label for='in_QuantityReturn'>Quantity Return</label>
                      <input name='in_QuantityReturn' id='in_QuantityReturn' class='form-control' type='text' >
                  </div>
                  <div class='form-group'>
                      <label for='in_QuantityReplaced'>Quantity Replaced</label>
                      <input name='in_QuantityReplaced' id='in_QuantityReplaced' class='form-control' type='text' >
                  </div> -->


                    <div class="text-center">
                      <button type="button" class="btn bg-gradient-success btn-lg btn-rounded w-100 mt-4 mb-0"
                        id="sales_create">Submit</button>
                    </div>
                  </form>
                </div>

              </div>
            </div>
          </div>
          </div>

        </div>
        <hr>
      <button id="sign_out" class="bg-gradient-danger" style="margin-right: 20px;color: azure;width: 150px;">Sign Out</button>
    </div>
  </div> 
  <div class="container-fluid">
    <br>
    <h5  style="    font-weight: bolder;
    color: #1875be;
    text-shadow: 0 0 1px #3788d899;">Today's Sales</h5>
  <div class="card">
   
    <div class="table-responsive">
      <table class="table align-items-center mb-0">
        <thead>
          <tr>
         
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">#Receipt No.</th>
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Type</th>
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Quantity</th>
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2">Customer Name</th>
            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Customer Phone</th>
            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Customer Address</th>
            <th class="text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Amount</th>
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">#Rider ID</th>
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Returned</th>
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Replaced</th>
            <th class="text-uppercase text-secondary text-xxs font-weight-bolder opacity-7">Date</th>

          </tr>
        </thead>
        <tbody id="sales_body">
        </tbody>
      </table>
    </div>
  </div>

  </div>
</body>
<script src="sales.js"></script>

<script src="assets/js/core/popper.min.js"></script>
<script src="assets/js/core/bootstrap.min.js"></script>
<script>

  document.querySelector('#sales_create').addEventListener('click', (e) => {
   

    const salesType = document.querySelector('#in_SalesType').value;
    const quantity = document.querySelector('#in_Quantity').value;
    const customerName = document.querySelector('#in_CustomerName').value;
    const customerPhone = document.querySelector('#in_CustomerPhone').value;
    const customerAddress = document.querySelector('#in_CustomerAddress').value;
    const amountPaid = document.querySelector('#in_AmountPaid').value;
    const dispatchId = document.querySelector('#in_DispatchId').value;
    const saleData = {
      sales_type: salesType,
      quantity: quantity,
      customer_name: customerName,
      customer_phone: customerPhone,
      customer_address: customerAddress,
      amount_paid: amountPaid,
      dispatch_id: dispatchId,
    };
    
    insertSale(saleData)
      .then(function (data){
       location.reload();
      })
      .catch(error => console.error('Error inserting sale:', error));
        // console.log();
      });

  function sales() {
         const sales_tbody = document.querySelector('#sales_body');
        getAllSales().then((response) => {
          sales_tbody.innerHTML = "";
          response.forEach(dts => {
            let{
              sales_receipt,
              sales_type,
              quantity,
              customer_name,
              customer_phone,
              customer_address,
              amount_paid,
              dispatch_id,
              quantity_return,
              quantity_replaced,
              date} = dts;
            sales_tbody.innerHTML += `<tr>
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${sales_receipt}</span></td>
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${sales_type}</span></td>
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${quantity}</span></td>
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${customer_name}</span></td>
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${customer_phone}</span></td> 
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${customer_address}</span></td>
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${amount_paid}</span></td>
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${dispatch_id}</span></td> 
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${quantity_return}</span></td>
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${quantity_replaced}</span></td> 
                    <td class='align-middle text-center'><span class='text-secondary text-xs font-weight-normal'>${date}</span></td>
                </tr>`;
          });
          // console.log(data);
        })
          .catch(error => console.error(error));

      }


      sales();
</script>
</html>